[
    {
        "example_id": 11,
        "problem": "Consider the paths of length $16$ that follow the lines from the lower left corner to the upper right corner on an $8\\times 8$ grid. Find the number of such paths that change direction exactly four times, as in the examples shown below.\n[asy] size(10cm); usepackage(\"tikz\");label(\"\begin{tikzpicture}[scale=.5]\\draw(0,0)grid(8,8);\\draw[line width=2,red](0,0)--(2,0)--(2,3)--(5,3)--(5,8)--(8,8);\\end{tikzpicture}\",origin); label(\"\\begin{tikzpicture}[scale=.5]\\draw(0,0)grid(8,8);\\draw[line width=2,red](0,0)--(0,3)--(3,3)--(3,5)--(8,5)--(8,8);\\end{tikzpicture}\",E); [/asy]",
        "correct_answer": "294",
        "n": "abstracted_workflow_desc_0_11",
        "response": "A path with exactly 4 direction changes has 5 alternating segments of rights (R) and ups (U).  If it starts with R there are 3 R\u2010segments summing to 8 rights and 2 U\u2010segments summing to 8 ups.  The number of positive compositions is C(8\u22121,3\u22121)\u00b7C(8\u22121,2\u22121)=C(7,2)\u00b7C(7,1)=21\u00b77=147.  Similarly, starting with U also gives 147.  By sub\u2010task 7 each segment assignment yields exactly one path, so the total is 147+147=294.\n\nAnswer:294",
        "sub_tasks_text": "Sub-task 1 output: thinking - The question asks to formalize the setting: we have an 8\u00d78 grid of unit squares, whose vertices are lattice points (i,j) with 0\u2264i,j\u22648. A path from the lower-left corner (0,0) to the upper-right corner (8,8) that follows the grid lines and has length 16 must consist of exactly 16 unit steps, each either east (E) or north (N). Since to go from (0,0) to (8,8) one must accumulate 8 units eastward and 8 units northward, the path is a sequence of 8 E\u2019s and 8 N\u2019s in some order. We define a direction change (or turn) as any place in the path where one step\u2019s direction differs from the immediately preceding step\u2019s direction (i.e.\\, an E followed by an N or an N followed by an E).; answer - An 8\u00d78 grid is the set of unit squares with integer-coordinate vertices (i,j) for 0\u2264i,j\u22648. A path of length 16 from the lower-left corner (0,0) to the upper-right corner (8,8) consists of 16 unit moves, each move either one step east (E) or one step north (N), using exactly 8 E moves and 8 N moves. A direction change occurs at any point where two consecutive moves are in different directions (E to N or N to E).\n<SEPERATOR>\nSub-task 2 output: thinking - From Sub-task 1 we know any path from (0,0) to (8,8) using grid\u2010line steps must take exactly 16 unit moves, each either east or north. To reach x=8 from x=0 requires 8 eastward steps; to reach y=8 from y=0 requires 8 northward steps. Thus every valid path is a sequence of these 16 moves, containing exactly 8 eastward moves (denoted R or E) and 8 northward moves (denoted U or N).; answer - Each path is a sequence of 16 moves, consisting of exactly 8 R (right) steps and 8 U (up) steps.\n<SEPERATOR>\nSub-task 3 output: thinking - We know from Sub-tasks 1 and 2 that any path is a sequence of 16 moves containing exactly 8 Rs and 8 Us. A direction change happens at each adjacent pair where the symbol switches (R\u2192U or U\u2192R). Requiring exactly four such switches among the 15 adjacencies means there are exactly four direction changes. Each change splits the sequence of moves into a new segment. Hence with four changes the path is cut into five maximal runs of identical moves. These runs must alternate R, U, R, U, R or U, R, U, R, U and each run must have positive length summing to 16 (and totaling 8 Rs and 8 Us).; answer - A path has exactly four direction changes if its 16\u2010move sequence (8 Rs and 8 Us) contains exactly four adjacent positions where the move changes from R to U or from U to R. Equivalently, the sequence is partitioned into five maximal runs of consecutive identical moves (alternating R and U) of positive lengths summing to 16.\n<SEPERATOR>\nSub-task 4 output: thinking - Sub-task 4 asks us not yet to compute the final number of paths, but to reformulate the counting problem in terms of run\u2010length compositions as identified in Sub-task 3.  We have exactly four direction changes, so the 16\u2010step path splits into five runs of consecutive identical moves that alternate between R and U.  If we let a\u2081,a\u2083,a\u2085 be the lengths of the three R\u2010runs and a\u2082,a\u2084 be the lengths of the two U\u2010runs, then each a\u1d62\u22651, a\u2081+a\u2083+a\u2085=8 (total R steps) and a\u2082+a\u2084=8 (total U steps), and a\u2081+\u2026+a\u2085=16.  There are two possible alternation patterns\u2014starting with R or starting with U\u2014so the total count is the sum over both cases of the number of positive\u2010integer solutions in each case.; answer - Rephrase the problem as counting all 5\u2010tuples of positive integers (a\u2081,a\u2082,a\u2083,a\u2084,a\u2085) with a\u2081+a\u2083+a\u2085=8 and a\u2082+a\u2084=8, which correspond to alternating runs of R and U (three R\u2010runs and two U\u2010runs), and then doubling to account for the option of starting with U instead of R.\n<SEPERATOR>\nSub-task 5 output: thinking - Sub-task 5 asks only to introduce variables for the five alternating runs and record the two sum constraints (total R steps =8, total U steps =8).  We don\u2019t yet solve; we just set up the system.  We must cover both possible starting directions but the form is identical: runs 1,3,5 are one direction, runs 2,4 the other, all runs \u22651.; answer - Let (a\u2081,a\u2082,a\u2083,a\u2084,a\u2085) be the lengths of the five consecutive runs (all a\u1d62\u22651).  \n\nCase 1: Path starts with R, so runs 1,3,5 are R-steps and runs 2,4 are U-steps.  Then\na\u2081 + a\u2083 + a\u2085 = 8   (total R steps)\na\u2082 + a\u2084     = 8   (total U steps)\n\nCase 2: Path starts with U, so runs 1,3,5 are U-steps and runs 2,4 are R-steps.  Then\na\u2081 + a\u2083 + a\u2085 = 8   (total U steps)\na\u2082 + a\u2084     = 8   (total R steps)\n\nIn both cases each a\u1d62 is a positive integer.\n<SEPERATOR>\nSub-task 6 output: thinking - Sub\u2010task 6 asks us to list all 5\u2010tuples of positive integers (a1,a2,a3,a4,a5) satisfying the two sums in each starting\u2010direction case.  In Case 1 (start with R) runs 1,3,5 are R\u2010steps so a1+a3+a5=8, and runs 2,4 are U\u2010steps so a2+a4=8.  The number of positive compositions of 8 into 3 parts is C(7,2)=21, and into 2 parts is C(7,1)=7, so there are 21\u00b77=147 such 5\u2010tuples.  In Case 2 (start with U) the same counts apply with the roles of R and U swapped, giving another 147.  Thus one can enumerate these by choosing any of the 21 triples for (a1,a3,a5) and any of the 7 pairs for (a2,a4) in each case, for a total of 294 assignments.; answer - Case 1 (starts with R): all pairs of compositions (a1,a3,a5) of 8 into 3 positive parts (21 choices) and (a2,a4) of 8 into 2 positive parts (7 choices), for 147 assignments.  Case 2 (starts with U): similarly 147 assignments.  Total = 294 assignments.\n<SEPERATOR>\nSub-task 7 output: thinking - Each assignment of the five segment lengths completely fixes the sequence of right\u2010 and up\u2010steps (the segments just tell you how many steps in each direction before a turn), so there is exactly one path realizing that assignment.  From Sub\u2010task 6 we have 294 valid assignments, and each assignment gives exactly one path.; answer - Each assignment yields exactly one distinct path, so the count per assignment is 1 (and in total there are 294 paths).\n<SEPERATOR>\nSub-task 8 output: thinking - A path with exactly 4 direction changes has 5 alternating segments of rights (R) and ups (U).  If it starts with R there are 3 R\u2010segments summing to 8 rights and 2 U\u2010segments summing to 8 ups.  The number of positive compositions is C(8\u22121,3\u22121)\u00b7C(8\u22121,2\u22121)=C(7,2)\u00b7C(7,1)=21\u00b77=147.  Similarly, starting with U also gives 147.  By sub\u2010task 7 each segment assignment yields exactly one path, so the total is 147+147=294.; answer - 294"
    }
]