[
    {
        "example_id": 11,
        "problem": "Consider the paths of length $16$ that follow the lines from the lower left corner to the upper right corner on an $8\\times 8$ grid. Find the number of such paths that change direction exactly four times, as in the examples shown below.\n[asy] size(10cm); usepackage(\"tikz\");label(\"\begin{tikzpicture}[scale=.5]\\draw(0,0)grid(8,8);\\draw[line width=2,red](0,0)--(2,0)--(2,3)--(5,3)--(5,8)--(8,8);\\end{tikzpicture}\",origin); label(\"\\begin{tikzpicture}[scale=.5]\\draw(0,0)grid(8,8);\\draw[line width=2,red](0,0)--(0,3)--(3,3)--(3,5)--(8,5)--(8,8);\\end{tikzpicture}\",E); [/asy]",
        "correct_answer": "294",
        "n": "abstracted_workflow_desc_0_11",
        "response": "To have exactly four direction changes, a path must consist of five runs (segments) of moves alternating between R and U. There are two possible start\u2010move patterns:\n\n1. R\u2013U\u2013R\u2013U\u2013R\n   \u2022 The three R\u2013runs (r1,r2,r3) are positive and sum to 8: number of solutions = C(8\u22121,3\u22121) = C(7,2) = 21.\n   \u2022 The two U\u2013runs (u1,u2) are positive and sum to 8: number of solutions = C(8\u22121,2\u22121) = C(7,1) = 7.\n   \u2022 Total paths for this pattern = 21\u00d77 = 147.\n\n2. U\u2013R\u2013U\u2013R\u2013U\n   \u2022 The three U\u2013runs sum to 8: C(7,2) = 21 ways.\n   \u2022 The two R\u2013runs sum to 8: C(7,1) = 7 ways.\n   \u2022 Total paths for this pattern = 21\u00d77 = 147.\n\nSince each run\u2010length distribution uniquely determines a path, we add the two pattern counts: 147 + 147 = 294.\n\nAnswer:The total number of such paths with exactly four direction changes is 294.",
        "sub_tasks_text": "Sub-task 1 output: thinking - The user wants a formal description of the 8\u00d78 grid, the allowable paths of length 16 from the SW to the NE corner, and the precise definition of a \u201cdirection change.\u201d I will restate the grid in coordinate form, describe a path as a sequence of unit steps (R or U), note that exactly 8 of each must occur to go from (0,0) to (8,8), and define a direction change as an adjacent pair of steps of different type.; answer - We model the 8\u00d78 grid as the set of integer coordinate points (i,j) with 0\u2264i,j\u22648. A path of length 16 from the lower\u2010left corner to the upper\u2010right corner is any sequence of 16 unit steps, each step going either one unit to the right (R: (i,j)\u2192(i+1,j)) or one unit up (U: (i,j)\u2192(i,j+1)), that starts at (0,0) and ends at (8,8). Since the net horizontal displacement must be +8 and the net vertical displacement +8, each valid path has exactly 8 R-steps and 8 U-steps in some order. A direction change occurs at position k in the sequence whenever step k and step k+1 are different types (i.e. an R followed by a U or a U followed by an R).\n<SEPERATOR>\nSub-task 2 output: thinking - Based on Sub\u2010task 1 we view each path as a word of length 16 over the alphabet {R,U}, with exactly eight R\u2019s and eight U\u2019s to move from (0,0) to (8,8). A \u201cdirection change\u201d is simply a switch between R and U in two consecutive letters. Thus every time the letter at position k differs from the letter at position k+1, we count one direction change. This exactly matches the combinatorial structure of runs in the R/U sequence.; answer - Each path is encoded as a sequence of 16 moves R or U with exactly 8 R\u2019s and 8 U\u2019s. A direction change occurs at each adjacent position where the letter switches (R\u2192U or U\u2192R). Thus the total number of direction changes in the path is the number of transitions between R and U in the 16\u2010letter sequence.\n<SEPERATOR>\nSub-task 3 output: thinking - From Sub-tasks 1 and 2 we know a path is encoded by a 16\u2010letter sequence of R\u2019s and U\u2019s with exactly eight R\u2019s and eight U\u2019s, and that a \u201cdirection change\u201d occurs whenever two consecutive letters differ. To have exactly four direction changes, the sequence must switch letters exactly four times. Equivalently, the 16 letters break into five contiguous runs (each run a maximal block of identical letters) that alternate between R and U, producing exactly four alternations between runs. This perfectly captures \u201cexactly four direction changes.\u201d; answer - A path has exactly four direction changes if and only if in its 16-step sequence (with 8 R\u2019s and 8 U\u2019s) there are exactly four positions k (1\u2264k\u226415) for which step k\u2260step k+1. Equivalently, the sequence consists of five consecutive runs of identical moves (R or U) that alternate in type, yielding precisely four alternations.\n<SEPERATOR>\nSub-task 4 output: thinking - From Sub-task 3 we have that exactly four alternations between R and U in a 16\u2010step path correspond to exactly four direction changes. In any string, the number of runs (maximal blocks of identical letters) is one more than the number of alternations. Hence four alternations imply five runs (segments).; answer - The sequence has five segments (runs).\n<SEPERATOR>\nSub-task 5 output: thinking - To have exactly four direction changes, a path must consist of five runs (segments) of moves alternating between R and U. There are two possible start\u2010move patterns:\n\n1. R\u2013U\u2013R\u2013U\u2013R\n   \u2022 The three R\u2013runs (r1,r2,r3) are positive and sum to 8: number of solutions = C(8\u22121,3\u22121) = C(7,2) = 21.\n   \u2022 The two U\u2013runs (u1,u2) are positive and sum to 8: number of solutions = C(8\u22121,2\u22121) = C(7,1) = 7.\n   \u2022 Total paths for this pattern = 21\u00d77 = 147.\n\n2. U\u2013R\u2013U\u2013R\u2013U\n   \u2022 The three U\u2013runs sum to 8: C(7,2) = 21 ways.\n   \u2022 The two R\u2013runs sum to 8: C(7,1) = 7 ways.\n   \u2022 Total paths for this pattern = 21\u00d77 = 147.\n\nSince each run\u2010length distribution uniquely determines a path, we add the two pattern counts: 147 + 147 = 294.; answer - The total number of such paths with exactly four direction changes is 294."
    }
]